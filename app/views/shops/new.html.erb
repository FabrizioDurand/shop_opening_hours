<div class="container mt-3" data-controller = "schedule-manager">
  <h1>Add a shop</h1>
  <%= simple_form_for(@shop) do |f| %>
    <%= f.input :name %>
    <% Schedule::WEEKDAYS.each do |day| %>
      <%= f.simple_fields_for :schedules do |schedule| %>
        <div data-action="click->schedule-manager#checkIfClosed">
          <%= schedule.input :closed, input_html: { data: { target: "schedule-manager.closedDay" } } %>
        </div>
        <div data-action="click->schedule-manager#checkIfMultipleSlots" data-schedule-manager-target="multipleSlotsCheck">
          <%= schedule.input :multiple_slots, input_html: { data: { target: "schedule-manager.multipleSlots" } }  %>
        </div>
        <div data-schedule-manager-target="openingHours">
          <%= schedule.input :open_at, minute_step: 15, include_blank: true, input_html: { value: "nil", data: { target: "schedule-manager.open" } } %>
          <%= schedule.input :close_at, minute_step: 15, include_blank: true, input_html: { data: { target: "schedule-manager.close" } }%>
        </div>
        <div data-schedule-manager-target="openingHourMs" class="d-none">
          <%= schedule.input :open_at_ms, minute_step: 15, include_blank: true %>
          <%= schedule.input :close_at_ms, minute_step: 15, include_blank: true %>
        </div>
        <%= schedule.input :weekday, input_html: { value: day }  %>
      <% end %>
    <% end %>
    <%= f.submit %>
  <% end %>
</div>
